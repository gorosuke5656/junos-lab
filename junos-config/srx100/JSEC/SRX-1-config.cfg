show copnfi                  configuration | no-more 
## Last commit: 2025-09-26 06:30:18 UTC by root
version 11.4R4.4;
system {
    host-name SRX-1;
    root-authentication {
        encrypted-password "$1$yT7oZ88p$5bHhlmOmm/S33/Mrgc92G0"; ## SECRET-DATA
    }
    login {
        user admin {
            uid 2001;
            class super-user;
            authentication {
                encrypted-password "$1$n2FzlRck$jyaBfqDAhCYq53cB50Kf20"; ## SECRET-DATA
            }
        }
        user lab {
            uid 2000;
            class super-user;
            authentication {
                encrypted-password "$1$ozRShO0f$hwwtoBIvSBk/LZ5T8Zc/s/"; ## SECRET-DATA
            }
        }
    }
    services {
        ssh;
        telnet;
        xnm-clear-text;
        web-management {
            http {
                interface vlan.0;
            }
            https {
                system-generated-certificate;
                interface vlan.0;
            }
        }
    }
    syslog {
        archive size 100k files 3;
        user * {
            any emergency;
        }
        file messages {
            any critical;
            authorization info;
        }
        file interactive-commands {
            interactive-commands error;
        }
        file kmd {
            daemon info;
            match KMD;
            archive size 500k;
        }
    }
    max-configurations-on-flash 5;
    max-configuration-rollbacks 49;
    license {
        autoupdate {
            url https://ae1.juniper.net/junos/key_retrieval;
        }
    }
    ntp {
        server 192.168.50.100;
    }
}
interfaces {
    fe-0/0/0 {
        unit 0 {
            family inet {
                address 172.16.1.100/24;
            }
        }
    }
    fe-0/0/1 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members vlan-trust;
                }
            }
        }
    }
    fe-0/0/2 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members vlan-trust;
                }
            }
        }
    }
    fe-0/0/3 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members vlan-trust;
                }
            }
        }
    }
    fe-0/0/4 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members vlan-trust;
                }
            }
        }
    }
    fe-0/0/5 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members vlan-trust;
                }
            }
        }
    }
    fe-0/0/6 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members vlan-trust;
                }
            }
        }
    }
    fe-0/0/7 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members vlan-trust;
                }
            }
        }
    }
    st0 {
        unit 0 {
            family inet {
                address 10.10.10.1/30;
            }
        }
        unit 1 {
            family inet {
                address 10.10.10.10/30;
            }
        }
        unit 2 {
            family inet {
                address 10.10.10.13/30;
            }
        }
        unit 3 {
            family inet {
                address 10.10.10.25/30;
            }
        }
    }
    vlan {
        unit 0 {
            family inet {
                address 192.168.10.254/24;
            }
        }
    }
}
routing-options {
    static {
        route 192.168.20.0/24 next-hop 10.10.10.2;
        route 192.168.30.0/24 next-hop 10.10.10.9;
        route 192.168.40.0/24 next-hop 10.10.10.14;
        route 192.168.50.0/24 next-hop 10.10.10.26;
        route 0.0.0.0/0 next-hop 172.16.1.254;
    }
}
protocols {
    stp;
}
security {
    ike {
        proposal P1 {
            authentication-method pre-shared-keys;
            dh-group group2;
            authentication-algorithm sha1;
            encryption-algorithm aes-128-cbc;
        }
        policy IKE-Policy {
            mode main;
            proposals P1;
            pre-shared-key ascii-text "$9$5Tz36/Au01hSbsg4ZG/CA"; ## SECRET-DATA
        }
        gateway gw-fukuoka {
            ike-policy IKE-Policy;
            address 172.16.2.100;
            external-interface fe-0/0/0.0;
        }
        gateway gw-sapporo {
            ike-policy IKE-Policy;
            address 172.16.3.100;
            external-interface fe-0/0/0.0;
        }
        gateway gw-chiba {
            ike-policy IKE-Policy;
            address 172.16.4.100;
            external-interface fe-0/0/0.0;
        }
        gateway gw-mgnt {
            ike-policy IKE-Policy;
            address 192.168.2.253;
            external-interface fe-0/0/0.0;
        }
    }
    ipsec {
        traceoptions {
            flag all;
        }
        proposal P2 {
            protocol esp;
            authentication-algorithm hmac-sha1-96;
            encryption-algorithm aes-128-cbc;
        }
        policy IPsec-Policy {
            perfect-forward-secrecy {
                keys group2;
            }
            proposals P2;
        }
        vpn vpn-fukuoka {
            bind-interface st0.0;
            vpn-monitor {
                optimized;
            }
            ike {
                gateway gw-fukuoka;
                ipsec-policy IPsec-Policy;
            }
            establish-tunnels immediately;
        }
        vpn vpn-sapporo {
            bind-interface st0.1;
            vpn-monitor {
                optimized;
            }
            ike {
                gateway gw-sapporo;
                ipsec-policy IPsec-Policy;
            }
            establish-tunnels immediately;
        }
        vpn vpn-chiba {
            bind-interface st0.2;
            vpn-monitor {
                optimized;
            }
            ike {
                gateway gw-chiba;
                ipsec-policy IPsec-Policy;
            }
            establish-tunnels immediately;
        }
        vpn vpn-mgnt {
            bind-interface st0.3;
            vpn-monitor {
                optimized;
            }
            ike {
                gateway gw-mgnt;
                ipsec-policy IPsec-Policy;
            }
            establish-tunnels immediately;
        }
    }
    address-book {
        book1 {
            address local-net 192.168.10.0/24;
            attach {
                zone trust;
            }
        }
        book2 {
            address fukuoka-net 192.168.20.0/24;
            address sapporo-net 192.168.30.0/24;
            address chiba-net 192.168.40.0/24;
            address mgnt-net 192.168.50.0/24;
            attach {
                zone vpn;
            }
        }
    }
    flow {
        tcp-mss {
            ipsec-vpn {
                mss 1350;
            }
        }
    }
    screen {
        ids-option untrust-screen {
            icmp {
                ping-death;
            }
            ip {
                source-route-option;
                tear-drop;
            }
            tcp {
                syn-flood {
                    alarm-threshold 1024;
                    attack-threshold 200;
                    source-threshold 1024;
                    destination-threshold 2048;
                    timeout 20;
                }
                land;
            }
        }
    }
    nat {
        source {
            rule-set trust-to-untrust {
                from zone trust;
                to zone untrust;
                rule source-nat-rule {
                    match {
                        source-address 192.168.10.0/24;
                        destination-address 0.0.0.0/0;
                    }
                    then {
                        source-nat {
                            interface;
                        }
                    }
                }
            }
        }
    }
    policies {
        from-zone trust to-zone vpn {
            policy local-to-spokes {
                match {
                    source-address local-net;
                    destination-address [ fukuoka-net sapporo-net chiba-net mgnt-net ];
                    application any;
                }
                then {
                    permit;
                }
            }
        }
        from-zone vpn to-zone trust {
            policy spokes-to-local {
                match {
                    source-address [ fukuoka-net sapporo-net chiba-net mgnt-net ];
                    destination-address local-net;
                    application any;
                }
                then {
                    permit;
                }
            }
        }
        from-zone trust to-zone untrust {
            policy TtoU {
                match {
                    source-address local-net;
                    destination-address any;
                    application any;
                }
                then {
                    permit;
                }
            }
        }
        from-zone untrust to-zone trust {
            policy UtoT {
                match {
                    source-address any;
                    destination-address local-net;
                    application any;
                }
                then {
                    permit;
                }
            }
        }
    }
    zones {
        security-zone untrust {
            screen untrust-screen;
            host-inbound-traffic {
                system-services {
                    ike;
                    ping;
                    ssh;
                    ftp;
                    ntp;
                    http;
                    https;
                    reverse-ssh;
                    reverse-telnet;
                    telnet;
                    tftp;
                    traceroute;
                }
            }
            interfaces {
                fe-0/0/0.0;
            }
        }
        security-zone trust {
            host-inbound-traffic {
                system-services {
                    ping;
                    all;
                }
                protocols {
                    all;
                }
            }
            interfaces {
                vlan.0;
            }
        }
        security-zone vpn {
            host-inbound-traffic {
                system-services {
                    ping;
                    all;
                }
                protocols {
                    all;
                }
            }
            interfaces {
                st0.0;
                st0.1;
                st0.2;
                st0.3;
            }
        }
    }
}
vlans {
    vlan-trust {
        vlan-id 3;
        l3-interface vlan.0;
    }
}

root@SRX-1> root@SRX-1> show configuration | no-more    | display set 
set version 11.4R4.4
set system host-name SRX-1
set system root-authentication encrypted-password "$1$yT7oZ88p$5bHhlmOmm/S33/Mrgc92G0"
set system login user admin uid 2001
set system login user admin class super-user
set system login user admin authentication encrypted-password "$1$n2FzlRck$jyaBfqDAhCYq53cB50Kf20"
set system login user lab uid 2000
set system login user lab class super-user
set system login user lab authentication encrypted-password "$1$ozRShO0f$hwwtoBIvSBk/LZ5T8Zc/s/"
set system services ssh
set system services telnet
set system services xnm-clear-text
set system services web-management http interface vlan.0
set system services web-management https system-generated-certificate
set system services web-management https interface vlan.0
set system syslog archive size 100k
set system syslog archive files 3
set system syslog user * any emergency
set system syslog file messages any critical
set system syslog file messages authorization info
set system syslog file interactive-commands interactive-commands error
set system syslog file kmd daemon info
set system syslog file kmd match KMD
set system syslog file kmd archive size 500k
set system max-configurations-on-flash 5
set system max-configuration-rollbacks 49
set system license autoupdate url https://ae1.juniper.net/junos/key_retrieval
set system ntp server 192.168.50.100
set interfaces fe-0/0/0 unit 0 family inet address 172.16.1.100/24
set interfaces fe-0/0/1 unit 0 family ethernet-switching vlan members vlan-trust
set interfaces fe-0/0/2 unit 0 family ethernet-switching vlan members vlan-trust
set interfaces fe-0/0/3 unit 0 family ethernet-switching vlan members vlan-trust
set interfaces fe-0/0/4 unit 0 family ethernet-switching vlan members vlan-trust
set interfaces fe-0/0/5 unit 0 family ethernet-switching vlan members vlan-trust
set interfaces fe-0/0/6 unit 0 family ethernet-switching vlan members vlan-trust
set interfaces fe-0/0/7 unit 0 family ethernet-switching vlan members vlan-trust
set interfaces st0 unit 0 family inet address 10.10.10.1/30
set interfaces st0 unit 1 family inet address 10.10.10.10/30
set interfaces st0 unit 2 family inet address 10.10.10.13/30
set interfaces st0 unit 3 family inet address 10.10.10.25/30
set interfaces vlan unit 0 family inet address 192.168.10.254/24
set routing-options static route 192.168.20.0/24 next-hop 10.10.10.2
set routing-options static route 192.168.30.0/24 next-hop 10.10.10.9
set routing-options static route 192.168.40.0/24 next-hop 10.10.10.14
set routing-options static route 192.168.50.0/24 next-hop 10.10.10.26
set routing-options static route 0.0.0.0/0 next-hop 172.16.1.254
set protocols stp
set security ike proposal P1 authentication-method pre-shared-keys
set security ike proposal P1 dh-group group2
set security ike proposal P1 authentication-algorithm sha1
set security ike proposal P1 encryption-algorithm aes-128-cbc
set security ike policy IKE-Policy mode main
set security ike policy IKE-Policy proposals P1
set security ike policy IKE-Policy pre-shared-key ascii-text "$9$5Tz36/Au01hSbsg4ZG/CA"
set security ike gateway gw-fukuoka ike-policy IKE-Policy
set security ike gateway gw-fukuoka address 172.16.2.100
set security ike gateway gw-fukuoka external-interface fe-0/0/0.0
set security ike gateway gw-sapporo ike-policy IKE-Policy
set security ike gateway gw-sapporo address 172.16.3.100
set security ike gateway gw-sapporo external-interface fe-0/0/0.0
set security ike gateway gw-chiba ike-policy IKE-Policy
set security ike gateway gw-chiba address 172.16.4.100
set security ike gateway gw-chiba external-interface fe-0/0/0.0
set security ike gateway gw-mgnt ike-policy IKE-Policy
set security ike gateway gw-mgnt address 192.168.2.253
set security ike gateway gw-mgnt external-interface fe-0/0/0.0
set security ipsec traceoptions flag all
set security ipsec proposal P2 protocol esp
set security ipsec proposal P2 authentication-algorithm hmac-sha1-96
set security ipsec proposal P2 encryption-algorithm aes-128-cbc
set security ipsec policy IPsec-Policy perfect-forward-secrecy keys group2
set security ipsec policy IPsec-Policy proposals P2
set security ipsec vpn vpn-fukuoka bind-interface st0.0
set security ipsec vpn vpn-fukuoka vpn-monitor optimized
set security ipsec vpn vpn-fukuoka ike gateway gw-fukuoka
set security ipsec vpn vpn-fukuoka ike ipsec-policy IPsec-Policy
set security ipsec vpn vpn-fukuoka establish-tunnels immediately
set security ipsec vpn vpn-sapporo bind-interface st0.1
set security ipsec vpn vpn-sapporo vpn-monitor optimized
set security ipsec vpn vpn-sapporo ike gateway gw-sapporo
set security ipsec vpn vpn-sapporo ike ipsec-policy IPsec-Policy
set security ipsec vpn vpn-sapporo establish-tunnels immediately
set security ipsec vpn vpn-chiba bind-interface st0.2
set security ipsec vpn vpn-chiba vpn-monitor optimized
set security ipsec vpn vpn-chiba ike gateway gw-chiba
set security ipsec vpn vpn-chiba ike ipsec-policy IPsec-Policy
set security ipsec vpn vpn-chiba establish-tunnels immediately
set security ipsec vpn vpn-mgnt bind-interface st0.3
set security ipsec vpn vpn-mgnt vpn-monitor optimized
set security ipsec vpn vpn-mgnt ike gateway gw-mgnt
set security ipsec vpn vpn-mgnt ike ipsec-policy IPsec-Policy
set security ipsec vpn vpn-mgnt establish-tunnels immediately
set security address-book book1 address local-net 192.168.10.0/24
set security address-book book1 attach zone trust
set security address-book book2 address fukuoka-net 192.168.20.0/24
set security address-book book2 address sapporo-net 192.168.30.0/24
set security address-book book2 address chiba-net 192.168.40.0/24
set security address-book book2 address mgnt-net 192.168.50.0/24
set security address-book book2 attach zone vpn
set security flow tcp-mss ipsec-vpn mss 1350
set security screen ids-option untrust-screen icmp ping-death
set security screen ids-option untrust-screen ip source-route-option
set security screen ids-option untrust-screen ip tear-drop
set security screen ids-option untrust-screen tcp syn-flood alarm-threshold 1024
set security screen ids-option untrust-screen tcp syn-flood attack-threshold 200
set security screen ids-option untrust-screen tcp syn-flood source-threshold 1024
set security screen ids-option untrust-screen tcp syn-flood destination-threshold 2048
set security screen ids-option untrust-screen tcp syn-flood timeout 20
set security screen ids-option untrust-screen tcp land
set security nat source rule-set trust-to-untrust from zone trust
set security nat source rule-set trust-to-untrust to zone untrust
set security nat source rule-set trust-to-untrust rule source-nat-rule match source-address 192.168.10.0/24
set security nat source rule-set trust-to-untrust rule source-nat-rule match destination-address 0.0.0.0/0
set security nat source rule-set trust-to-untrust rule source-nat-rule then source-nat interface
set security policies from-zone trust to-zone vpn policy local-to-spokes match source-address local-net
set security policies from-zone trust to-zone vpn policy local-to-spokes match destination-address fukuoka-net
set security policies from-zone trust to-zone vpn policy local-to-spokes match destination-address sapporo-net
set security policies from-zone trust to-zone vpn policy local-to-spokes match destination-address chiba-net
set security policies from-zone trust to-zone vpn policy local-to-spokes match destination-address mgnt-net
set security policies from-zone trust to-zone vpn policy local-to-spokes match application any
set security policies from-zone trust to-zone vpn policy local-to-spokes then permit
set security policies from-zone vpn to-zone trust policy spokes-to-local match source-address fukuoka-net
set security policies from-zone vpn to-zone trust policy spokes-to-local match source-address sapporo-net
set security policies from-zone vpn to-zone trust policy spokes-to-local match source-address chiba-net
set security policies from-zone vpn to-zone trust policy spokes-to-local match source-address mgnt-net
set security policies from-zone vpn to-zone trust policy spokes-to-local match destination-address local-net
set security policies from-zone vpn to-zone trust policy spokes-to-local match application any
set security policies from-zone vpn to-zone trust policy spokes-to-local then permit
set security policies from-zone trust to-zone untrust policy TtoU match source-address local-net
set security policies from-zone trust to-zone untrust policy TtoU match destination-address any
set security policies from-zone trust to-zone untrust policy TtoU match application any
set security policies from-zone trust to-zone untrust policy TtoU then permit
set security policies from-zone untrust to-zone trust policy UtoT match source-address any
set security policies from-zone untrust to-zone trust policy UtoT match destination-address local-net
set security policies from-zone untrust to-zone trust policy UtoT match application any
set security policies from-zone untrust to-zone trust policy UtoT then permit
set security zones security-zone untrust screen untrust-screen
set security zones security-zone untrust host-inbound-traffic system-services ike
set security zones security-zone untrust host-inbound-traffic system-services ping
set security zones security-zone untrust host-inbound-traffic system-services ssh
set security zones security-zone untrust host-inbound-traffic system-services ftp
set security zones security-zone untrust host-inbound-traffic system-services ntp
set security zones security-zone untrust host-inbound-traffic system-services http
set security zones security-zone untrust host-inbound-traffic system-services https
set security zones security-zone untrust host-inbound-traffic system-services reverse-ssh
set security zones security-zone untrust host-inbound-traffic system-services reverse-telnet
set security zones security-zone untrust host-inbound-traffic system-services telnet
set security zones security-zone untrust host-inbound-traffic system-services tftp
set security zones security-zone untrust host-inbound-traffic system-services traceroute
set security zones security-zone untrust interfaces fe-0/0/0.0
set security zones security-zone trust host-inbound-traffic system-services ping
set security zones security-zone trust host-inbound-traffic system-services all
set security zones security-zone trust host-inbound-traffic protocols all
set security zones security-zone trust interfaces vlan.0
set security zones security-zone vpn host-inbound-traffic system-services ping
set security zones security-zone vpn host-inbound-traffic system-services all
set security zones security-zone vpn host-inbound-traffic protocols all
set security zones security-zone vpn interfaces st0.0
set security zones security-zone vpn interfaces st0.1
set security zones security-zone vpn interfaces st0.2
set security zones security-zone vpn interfaces st0.3
set vlans vlan-trust vlan-id 3
set vlans vlan-trust l3-interface vlan.0

root@SRX-1> 